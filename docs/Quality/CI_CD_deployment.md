# CI/CD 流水线构建与部署

CI/CD流水线就是持续集成（Continuous Integration ，CI），持续交付（Continuous Delivery，CD）以及持续部署（Continuous Deploy，CD）。是一种新颖高效的开发、测试、发布软件的模型。

## 持续集成
持续集成的重点是将各个开发人员的工作集合到一个代码仓库中。通常，每天都要进行几次，主要目的是尽早发现集成错误，使团队更加紧密结合，更好地协作。

在传统软件开发过程中，集成通常发生在每个人都完成了各自的工作之后。在项目尾声阶段，通常集成还要痛苦的花费数周或者数月的时间来完成。持续集成是一个将集成提前至开发周期的早期阶段的实践方式，让构建、测试和集成代码更经常反复地发生。

开发人员通常使用一种叫做CI Server 的工具来做构建和集成。持续集成要求各模块的开发人员能够自测代码，即分别测试各自代码来保证它能够正常工作，这些测试通常被称为单元测试。

代码集成以后，当所有的单元测试通过，测试人员就得到了一个绿色构建（green build）。这表明他们已经成功地集成在一起，代码正按照测试预期地在工作。然而，尽管集成代码能够成功地一起工作了，它仍未为生产做好准备，因为它没有在类似生产的环境中测试和工作。

![持续集成](./CI_CD_deployment_image/持续集成.PNG)

## 持续交付
持续交付的目的是最小化部署或释放过程中固有的摩擦。它的实现通常能够将构建部署的每个步骤自动化，以便任何时刻能够安全地完成代码发布（理想情况下）。

持续交付是持续集成的延伸，将集成后的代码部署到类生产环境，确保可以以可持续的方式快速向客户发布新的更改。如果代码没有问题，可以继续手工部署到生产环境中。

持续交付具有高度的自动化，并且在一些云计算环境中也易于配置。在流水线的每个阶段，如果构建无法通过关键测试会向团队发出警报。否则，将继续进入下一个测试，并在连续通过测试后自动进入下一个阶段。流水线的最后一个部分会将构建部署到和生产环境等效的环境中。这是一个整体的过程，因为构建、部署和环境都是一起执行和测试的，它能让构建在实际的生产环境可部署和可验证。

![持续交付](./CI_CD_deployment_image/持续交付.PNG)

## 持续部署

持续部署是一种更高程度的自动化，无论何时对代码进行重大更改，都会自动进行构建/部署。

因为如果真的想获得持续交付的好处，就应该尽早部署到生产环境，以确保可以小批次发布，在发生问题时可以轻松排除故障。于是有了持续部署。

持续部署是在持续交付的基础上，把部署到生产环境的过程自动化。它扩展了持续交付，以便软件构建，在通过所有测试时自动部署。在这样的流程中，不需要人为决定何时及如何投入生产环境。CI/CD 系统的最后一步将在构建后的组件/包退出流水线时自动部署。此类自动部署可以配置为快速向客户分发组件、功能模块或修复补丁，并准确说明当前提供的内容。

![持续部署](./CI_CD_deployment_image/持续部署.PNG)